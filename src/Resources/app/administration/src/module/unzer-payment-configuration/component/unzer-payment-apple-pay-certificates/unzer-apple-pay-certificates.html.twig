{% block unzer_payment_apple_pay_certificates %}
    <sw-container :title="$tc(`unzer-payment-settings.apple-pay.certificates.title`)"
                  class="unzer-payment-settings--apple-pay-certificates">
        <template v-if="!isLoading">
            {% block unzer_payment_apple_pay_certificates_form %}
                <sw-inherit-wrapper
                    ref="inheritWrapperPaymentProcessingCertificate"
                    :label="$tc('unzer-payment-settings.apple-pay.paymentProcessingCertificate.label')"
                    v-model="parentRefs.systemConfig.actualConfigData[selectedSalesChannelId]['UnzerPayment6.settings.applePayPaymentProcessingCertificateId']"
                    :inheritedValue="getInheritedValue('applePayPaymentProcessingCertificateId')"
                    :has-parent="isNotDefaultSalesChannel"
                    @restore="setPaymentProcessingInheritance"
                    @remove="removePaymentProcessingInheritance"
                    >
                    <template #content="props">
                        <sw-label
                            v-if="!isDataLoading"
                            :variant="paymentProcessingValid ? 'success' : 'danger'"
                            appearance="circle"
                            v-tooltip="$tc('unzer-payment-settings.apple-pay.certificates.check.paymentProcessingValid.' + paymentProcessingValid.toString())">
                            <sw-icon :name="paymentProcessingValid ? 'default-basic-checkmark-circle' : 'default-badge-alert'" :small="true"></sw-icon>
                        </sw-label>
                        <sw-loader size="10px" v-else></sw-loader>
                        <small v-html="$tc('unzer-payment-settings.apple-pay.paymentProcessingCertificate.helpText')"></small>

                        <sw-file-input
                            ref="paymentProcessingCertificateInput"
                            class="sw-field sw-block-field"
                            v-model="paymentProcessingCertificate"
                            @change="onInputChangePaymentProcessing"
                        >
                            <template v-slot:caption-label>
                                <span></span>
                                <!-- NEXT-22639: Drag&Drop does not work on these sw-file-input, so we hide the text for that -->
                            </template>
                        </sw-file-input>
                    </template>
                </sw-inherit-wrapper>

                <sw-inherit-wrapper
                    ref="inheritWrapperPaymentProcessingKey"
                    :label="$tc('unzer-payment-settings.apple-pay.paymentProcessingKey.label')"
                    v-model="parentRefs.systemConfig.actualConfigData[selectedSalesChannelId]['UnzerPayment6.settings.applePayPaymentProcessingCertificateId']"
                    :inheritedValue="getInheritedValue('applePayPaymentProcessingCertificateId')"
                    :has-parent="isNotDefaultSalesChannel"
                    @restore="setPaymentProcessingInheritance"
                    @remove="removePaymentProcessingInheritance"
                >
                    <template #content="props">
                        <sw-file-input
                            ref="paymentProcessingKeyInput"
                            class="sw-field sw-block-field"
                            v-model="paymentProcessingKey"
                            @change="onInputChangePaymentProcessing"
                        >
                            <template v-slot:caption-label>
                                <span></span>
                                <!-- NEXT-22639: Drag&Drop does not work on these sw-file-input, so we hide the text for that -->
                            </template>
                        </sw-file-input>
                    </template>
                </sw-inherit-wrapper>

                <sw-inherit-wrapper
                    ref="inheritWrapperMerchantIdentificationCertificate"
                    :label="$tc('unzer-payment-settings.apple-pay.merchantIdentificationCertificate.label')"
                    v-model="parentRefs.systemConfig.actualConfigData[selectedSalesChannelId]['UnzerPayment6.settings.applePayMerchantIdentificationCertificateId']"
                    :inheritedValue="getInheritedValue('applePayMerchantIdentificationCertificateId')"
                    :has-parent="isNotDefaultSalesChannel"
                    @restore="setMerchantIdentificationInheritance"
                    @remove="removeMerchantIdentificationInheritance"
                >
                    <template #content="props">
                        <sw-label
                            v-if="!isDataLoading"
                            :variant="merchantIdentificationValid ? 'success' : 'danger'"
                            appearance="circle"
                            v-tooltip="$tc('unzer-payment-settings.apple-pay.certificates.check.merchantIdentificationValid.' + merchantIdentificationValid.toString())">
                            <sw-icon :name="merchantIdentificationValid ? 'default-basic-checkmark-circle' : 'default-badge-alert'" :small="true"></sw-icon>
                        </sw-label>
                        <sw-loader size="10px" v-else></sw-loader>
                        <sw-label
                            v-if="!isDataLoading && merchantIdentificationValidUntil !== null"
                            :variant="(merchantIdentificationValidUntil > now) ? 'success' : 'warning'"
                            appearance="circle"
                            v-tooltip="$tc('unzer-payment-settings.apple-pay.certificates.check.merchantIdentificationValidUntil.' + (merchantIdentificationValidUntil > now).toString())">
                            <sw-icon name="default-time-clock" :small="true"></sw-icon>
                        </sw-label>
                        <small v-html="$tc('unzer-payment-settings.apple-pay.merchantIdentificationCertificate.helpText')"></small>

                        <sw-file-input
                            ref="merchantIdentificationCertificateInput"
                            class="sw-field sw-block-field"
                            v-model="merchantIdentificationCertificate"
                            @change="onInputChangeMerchantIdentification"
                        >
                            <template v-slot:caption-label>
                                <span></span>
                                <!-- NEXT-22639: Drag&Drop does not work on these sw-file-input, so we hide the text for that -->
                            </template>
                        </sw-file-input>
                    </template>
                </sw-inherit-wrapper>

                <sw-inherit-wrapper
                    ref="inheritWrapperMerchantIdentificationKey"
                    :label="$tc('unzer-payment-settings.apple-pay.merchantIdentificationKey.label')"
                    v-model="parentRefs.systemConfig.actualConfigData[selectedSalesChannelId]['UnzerPayment6.settings.applePayMerchantIdentificationCertificateId']"
                    :inheritedValue="getInheritedValue('applePayMerchantIdentificationCertificateId')"
                    :has-parent="isNotDefaultSalesChannel"
                    @restore="setMerchantIdentificationInheritance"
                    @remove="removeMerchantIdentificationInheritance"
                >
                    <template #content="props">
                        <sw-file-input
                            ref="merchantIdentificationKeyInput"
                            class="sw-field sw-block-field"
                            v-model="merchantIdentificationKey"
                            @change="onInputChangeMerchantIdentification"
                        >
                            <template v-slot:caption-label>
                                <span></span>
                                <!-- NEXT-22639: Drag&Drop does not work on these sw-file-input, so we hide the text for that -->
                            </template>
                        </sw-file-input>
                    </template>
                </sw-inherit-wrapper>
            {% endblock %}
        </template>
    </sw-container>
{% endblock %}
