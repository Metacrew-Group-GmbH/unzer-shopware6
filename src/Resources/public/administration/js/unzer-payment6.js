/*! For license information please see unzer-payment6.js.LICENSE.txt */
!function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=(window.__sw__.assetPath + '/bundles/unzerpayment6/'),n(n.s="ba0n")}({"0I75":function(e,t,n){var a=n("xq9F");a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("ydqr").default)("2f7ae3e8",a,!0,{})},"6UWm":function(e,t,n){},"6hRc":function(e){e.exports=JSON.parse('{"unzer-payment":{"tabTitle":"Unzer Payment","paymentDetails":{"history":{"cardTitle":"Payment History","column":{"type":"Type","amount":"Amount","date":"Date"},"type":{"authorization":"Authorization","charge":"Charging","shipment":"Shipping notification","cancellation":"Refund","default":""}},"actions":{"reason":{"placeholder":"reason","cancel":"cancel","credit":"credit","return":"return"},"chargeButton":"Charge","shipButton":"Shipping notice","refundButton":"Refund","defaultButton":"Done"},"detail":{"cardTitle":"Payment Details","shortId":"Short-ID","id":"Payment-ID","state":"State","amountRemaining":"Amount (Remaining)","amountCancelled":"Amount (Cancelled)","amountCharged":"Amount (Charged)","descriptor":"Descriptor"},"metadata":{"cardTitle":"Metadata","column":{"key":"Key","value":"Value"}},"basket":{"cardTitle":"Basket","column":{"quantity":"Quantity","title":"Title","amountGross":"Amount (gross)","amountNet":"Amount (net)"}},"notifications":{"genericErrorMessage":"An error has occurred!","refundSuccessTitle":"Refund","refundSuccessMessage":"The reimbursement was successfully completed.","refundErrorTitle":"Refund","chargeSuccessTitle":"Charge","chargeSuccessMessage":"The collection of the payment was carried out successfully.","chargeErrorTitle":"Charge","shipSuccessTitle":"Shipping notice","shipSuccessMessage":"The shipping notification was successfully sent.","shipErrorTitle":"Shipping notice","invoiceNotFoundMessage":"No invoice was found for this order.","couldNotRetrieveMessage":"The payment details could not be retrieved, please check the log files for more information.","documentDateMissingError":"Document date for invoice is empty.","paymentMissingError":"Payment could not be found","paylaterInvoiceDocumentRequiredErrorMessage":"Please create or upload an invoice for the order first."}},"order-list":{"transactionId":"Unzer transaction ID"}},"unzer-payment-settings":{"module":{"title":"Unzer Payment","description":"Unzer Payment"},"apple-pay":{"certificates":{"title":"Apple Pay Certificates","check":{"paymentProcessingValid":{"true":"The Payment Processing certificate is present and valid","false":"The Payment Processing certificate is missing"},"merchantIdentificationValid":{"true":"The Merchant Identification certificate is present","false":"The Merchant Identification certificate is missing"},"merchantIdentificationValidUntil":{"true":"The Merchant Identification certificate is valid","false":"The Merchant Identification certificate is expired and must be renewed"}},"update":{"success":{"title":"Success","message":"Certificates were updated successfully"},"error":{"title":"Error","message":"An error occurred during certificate update","messageInvalidCertificate":"The given certificate data for {type} is invalid","messageMissingCertificateFiles":"The given certificate data for {type} is incomplete"}}},"paymentProcessingCertificate":{"label":"Payment Processing Certificate","helpText":"Certificate and Key have to be prepared as specified in <a href=\\"https://docs.unzer.com/payment-methods/applepay/applepay-prerequisites/\\" target=\\"_blank\\" rel=\\"noopener\\">the Unzer documentation</a>."},"paymentProcessingKey":{"label":"Payment Processing Certificate Key (Private Key)"},"publicKey":{"changeNotice":"Please note: After changing the Unzer keys, you have to re-upload your Apple Pay Payment Processing Certificate."},"merchantIdentificationCertificate":{"label":"Merchant Identification Certificate","helpText":"Certificate and Key have to be prepared as specified in <a href=\\"https://docs.unzer.com/payment-methods/applepay/applepay-prerequisites/\\" target=\\"_blank\\" rel=\\"noopener\\">the Unzer documentation</a>."},"merchantIdentificationKey":{"label":"Merchant Identification Certificate Key (Private Key)"}},"form":{"message":{"success":{"title":"Test succeeded","message":"The provided credentials are valid!"},"error":{"title":"Test failed","message":"API Credentials are invalid, please correct them and try again!"}},"testButton":"Test API credentials","webhookButton":"Register webhooks"},"modal":{"close":"Close","webhook":{"title":"Webhooks","httpsInfo":"Only one HTTPS domain per sales channel can be registered.","registered":"Webhook is already registered","placeholder":"Please select a domain","submit":{"register":"Register webhooks","clear":"Select items to clear | Clear selected webhook | Clear {count} webhooks"}}},"webhook":{"messagePrefix":"Domain: ","register":{"done":"Webhook registered | Webhooks registered","error":"Webhook could not be registered | Webhooks could not be registered"},"clear":{"done":"Webhook cleared | Webhooks cleared","error":"Webhook could not be cleared | Webhooks could not be cleared"},"missing":{"fields":"Some mandatory fields are missing","context":"The context could not be refreshed","selection":"No domain was selected"},"notFound":{"salesChannelDomain":"The selected domain could not be found"},"globalError":{"title":"An error has occurred!","message":"Please contact us for more information"},"empty":"There are no webhooks registered for this private key. Make sure the private key is valid and check for other specific sales channel configurations."}}}')},"7f1S":function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,o=void 0,o=function(e,t){if("object"!==n(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===n(o)?o:String(o)),i)}var r,o}function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=Shopware.Application,u=Shopware.Classes.ApiService,d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}(l,e);var t,n,s,c=o(l);function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unzer-payment";return a(this,l),c.call(this,e,t,n)}return t=l,(n=[{key:"fetchPaymentDetails",value:function(e){var t="_action/".concat(this.getApiBasePath(),"/transaction/").concat(e,"/details");return this.httpClient.get(t,{headers:this.getBasicHeaders()}).then((function(e){return u.handleResponse(e)}))}},{key:"chargeTransaction",value:function(e,t,n){var a="_action/".concat(this.getApiBasePath(),"/transaction/").concat(e,"/charge/").concat(n);return this.httpClient.get(a,{headers:this.getBasicHeaders()}).then((function(e){return u.handleResponse(e)}))}},{key:"refundTransaction",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i="_action/".concat(this.getApiBasePath(),"/transaction/").concat(e,"/refund/").concat(t,"/").concat(n);return null!==a&&(i="".concat(i,"/").concat(a)),this.httpClient.get(i,{headers:this.getBasicHeaders()}).then((function(e){return u.handleResponse(e)}))}},{key:"ship",value:function(e){var t="_action/".concat(this.getApiBasePath(),"/transaction/").concat(e,"/ship");return this.httpClient.get(t,{headers:this.getBasicHeaders()}).then((function(e){return u.handleResponse(e)}))}}])&&i(t.prototype,n),s&&i(t,s),Object.defineProperty(t,"prototype",{writable:!1}),l}(u);l.addServiceProvider("UnzerPaymentService",(function(e){var t=l.getContainer("init");return new d(t.httpClient,e.loginService)}))},AuU3:function(e,t){var n=Shopware.Component,a=Shopware.Data.Criteria;n.extend("unzer-entity-single-select-delivery-status","sw-entity-single-select",{props:{criteria:{type:Object,required:!1,default:function(){var e=new a(1,100);return e.addFilter(a.equals("stateMachine.technicalName","order_delivery.state")),e}}}})},I7rx:function(e,t,n){var a=n("6UWm");a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("ydqr").default)("386448f4",a,!0,{})},J1dr:function(e){e.exports=JSON.parse('{"unzer-payment":{"tabTitle":"Unzer Payment","paymentDetails":{"history":{"cardTitle":"Zahlungsverlauf","column":{"type":"Typ","amount":"Betrag","date":"Datum"},"type":{"authorization":"Reservierung","charge":"Einzug","shipment":"Versandmitteilung","cancellation":"Rückerstattung","default":""}},"actions":{"reason":{"placeholder":"Grund","cancel":"Abgebrochen","credit":"Gutschrift","return":"Rückgabe"},"chargeButton":"Einziehen","shipButton":"Versandmitteilung","refundButton":"Rückerstatten","defaultButton":"Erledigt"},"detail":{"cardTitle":"Zahlungsdetails","shortId":"Short-ID","id":"Zahlungs-ID","state":"Status","amountRemaining":"Betrag (Rest)","amountCancelled":"Betrag (Rückerstattet)","amountCharged":"Betrag (Eingezogen)","descriptor":"Verwendungszweck"},"metadata":{"cardTitle":"Metadaten","column":{"key":"Schlüssel","value":"Wert"}},"basket":{"cardTitle":"Warenkorb","column":{"quantity":"Anzahl","title":"Titel","amountGross":"Betrag (brutto)","amountNet":"Betrag (netto)"}},"notifications":{"genericErrorMessage":"Es ist ein Fehler aufgetreten!","refundSuccessTitle":"Rückerstatten","refundSuccessMessage":"Die Rückerstattung wurde erfolgreich durchgeführt.","refundErrorTitle":"Rückerstatten","chargeSuccessTitle":"Einziehen","chargeSuccessMessage":"Das Einziehen der Zahlung wurde erfolgreich durchgeführt.","chargeErrorTitle":"Einziehen","shipSuccessTitle":"Versandmitteilung","shipSuccessMessage":"Die Versandmitteilung wurde erfolgreich gesendet.","shipErrorTitle":"Versandmitteilung","invoiceNotFoundMessage":"Zu dieser Bestellung wurde keine Rechnung gefunden","couldNotRetrieveMessage":"Die Zahlungsdetails konnten nicht abgerufen werden, bitte prüfen Sie die Logdateien für weitere Informationen.","documentDateMissingError":"Das Datum der Rechnung ist leer.","paymentMissingError":"Die Zahlung konnte nicht gefunden werden","paylaterInvoiceDocumentRequiredErrorMessage":"Bitte erstellen oder hinterlegen Sie zunächst eine Rechnung für die Bestellung."}},"order-list":{"transactionId":"Unzer Transaktions ID"}},"unzer-payment-settings":{"module":{"title":"Unzer Payment","description":"Unzer Payment"},"apple-pay":{"certificates":{"title":"Apple Pay Zertifikate","check":{"paymentProcessingValid":{"true":"Das Payment Processing-Zertifikat ist vorhanden und gültig","false":"Das Payment Processing-Zertifikat fehlt"},"merchantIdentificationValid":{"true":"Das Merchant Identification-Zertifikat ist vorhanden","false":"Das Merchant Identification-Zertifikat fehlt"},"merchantIdentificationValidUntil":{"true":"Das Merchant Identification-Zertifikat ist gültig","false":"Das Merchant Identification-Zertifikat ist abgelaufen und muss erneuert werden"}},"update":{"success":{"title":"Erfolg","message":"Die Zertifikate wurden erfolgreich aktualisiert"},"error":{"title":"Fehler","message":"Bei der Aktualisierung der Zertifikate trat ein Fehler auf","messageInvalidCertificate":"Die übergebenen Zertifikatsdaten für {type} sind ungültig","messageMissingCertificateFiles":"Die übergebenen Zertifikatsdaten für {type} sind unvollständig"}}},"paymentProcessingCertificate":{"label":"Payment Processing Zertifikat (apple_pay.pem)","helpText":"Zertifikat und Schlüssel müssen nach den Schritten der <a href=\\"https://docs.unzer.com/payment-methods/applepay/applepay-prerequisites/\\" target=\\"_blank\\" rel=\\"noopener\\">Unzer-Dokumentation</a> vorbereitet werden."},"paymentProcessingKey":{"label":"Payment Processing Zertifikatsschlüssel (privatekey.key)"},"publicKey":{"changeNotice":"Bitte beachten: Nach dem Ändern der Unzer Keys muss das Apple Pay Payment Processing Certificate neu hochgeladen werden."},"merchantIdentificationCertificate":{"label":"Merchant Identification Zertifikat (merchant_id.pem)","helpText":"Zertifikat und Schlüssel müssen nach den Schritten der <a href=\\"https://docs.unzer.com/payment-methods/applepay/applepay-prerequisites/\\" target=\\"_blank\\" rel=\\"noopener\\">Unzer-Dokumentation</a> vorbereitet werden."},"merchantIdentificationKey":{"label":"Merchant Identification Zertifikatsschlüssel (merchant_id.key)"}},"form":{"message":{"success":{"title":"Test erfolgreich","message":"Die angegebenen API-Zugangsdaten sind korrekt!"},"error":{"title":"Test fehlgeschlagen","message":"Die angegebenen API-Zugangsdaten sind nicht korrekt! Bitte korrigieren Sie die Eingabe und versuchen Sie es erneut."}},"testButton":"API Zugangsdaten testen","webhookButton":"Webhooks registrieren"},"modal":{"close":"Schließen","webhook":{"title":"Webhooks","httpsInfo":"Es kann nur eine HTTPS-Domain pro Verkaufskanal registriert werden.","registered":"Webhook ist bereits registriert","placeholder":"Bitte wählen Sie eine Domain aus","submit":{"register":"Webhooks registrieren","clear":"Webhooks auswählen | Ausgewählten Webhook entfernen | Entferne {count} Webhooks"}}},"webhook":{"messagePrefix":"Domain: ","register":{"done":"Webhook registriert | Webhooks registriert","error":"Der Webhook konnte nicht registriert werden | Die Webhooks konnten nicht registriert werden"},"clear":{"done":"Webhook entfernt | Webhooks entfernt","error":"Der Webhook konnte nicht entfernt werden | Die Webhooks konnten nicht entfernt werden"},"missing":{"fields":"Nicht alle benötigten Felder sind vorhanden","context":"Der Kontext konnte nicht aktualisiert werden","selection":"Es wurden keine Domains selektiert"},"notFound":{"salesChannelDomain":"Die spezifizierte Domain wurde nicht gefunden"},"globalError":{"title":"Ein Fehler ist aufgetreten","message":"Bitte kontaktieren sie uns für mehr Informationen"},"empty":"Für diesen Private Key sind keine Webhooks registriert. Bitte prüfen Sie ob dieser valide ist und ob Konfigurationen für dedizierte Verkaufskanäle vorgenommen wurden."}}}')},RbH9:function(e,t,n){var a=n("dr7A");a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("ydqr").default)("33d1eeac",a,!0,{})},S1lU:function(e,t,n){},TWqd:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,o=void 0,o=function(e,t){if("object"!==n(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===n(o)?o:String(o)),i)}var r,o}function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=Shopware.Application,u=Shopware.Classes.ApiService,d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}(l,e);var t,n,s,c=o(l);function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unzer-payment";return a(this,l),c.call(this,e,t,n)}return t=l,(n=[{key:"validateCredentials",value:function(e){return this.httpClient.post("_action/".concat(this.getApiBasePath(),"/validate-credentials"),e,{headers:this.getBasicHeaders()}).then((function(e){return u.handleResponse(e)}))}},{key:"registerWebhooks",value:function(e){return this.httpClient.post("_action/".concat(this.getApiBasePath(),"/register-webhooks"),e,{headers:this.getBasicHeaders()}).then((function(e){return u.handleResponse(e)}))}},{key:"clearWebhooks",value:function(e){return this.httpClient.post("_action/".concat(this.getApiBasePath(),"/clear-webhooks"),e,{headers:this.getBasicHeaders()}).then((function(e){return u.handleResponse(e)}))}},{key:"getWebhooks",value:function(e){return this.httpClient.post("_action/".concat(this.getApiBasePath(),"/get-webhooks"),{privateKey:e},{headers:this.getBasicHeaders()}).then((function(e){return u.handleResponse(e)}))}}])&&i(t.prototype,n),s&&i(t,s),Object.defineProperty(t,"prototype",{writable:!1}),l}(u);l.addServiceProvider("UnzerPaymentConfigurationService",(function(e){var t=l.getContainer("init");return new d(t.httpClient,e.loginService)}))},aaOj:function(e,t,n){var a=n("S1lU");a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("ydqr").default)("68ea187d",a,!0,{})},ba0n:function(e,t,n){"use strict";n.r(t);n("aaOj");var a=Shopware,i=a.Component,r=a.Mixin,o="CANCEL",s="RETURN",c="CREDIT";i.register("unzer-payment-actions",{template:'{% block unzer_payment_actions %}\n    <sw-container columns="1fr 1fr" gap="0 10px" v-on:click.native.stop>\n        {% block unzer_payment_actions_amount_field %}\n            <div class="unzer-payment-actions--input">\n                <sw-number-field\n                    numberType="float"\n                    :min="0.00"\n                    :max="maxTransactionAmount"\n                    :digits="decimalPrecision"\n                    :disabled="maxTransactionAmount <= 0"\n                    v-model="transactionAmount">\n                </sw-number-field>\n            </div>\n        {% endblock %}\n\n        <div class="unzer-payment-actions--button">\n            {% block unzer_payment_actions_charge_button %}\n                <sw-button-process :disabled="maxTransactionAmount <= 0 || transactionAmount <= 0" :isLoading="isLoading" :processSuccess="isSuccessful" v-if="isChargePossible" @click="charge">\n                    {{ $tc(\'unzer-payment.paymentDetails.actions.chargeButton\') }}\n                </sw-button-process>\n            {% endblock %}\n\n            {% block unzer_payment_actions_refund_button %}\n                <sw-button-process :disabled="maxTransactionAmount <= 0 || transactionAmount <= 0" :isLoading="isLoading" :processSuccess="isSuccessful" v-else-if="isRefundPossible" @click="refund">\n                    {{ $tc(\'unzer-payment.paymentDetails.actions.refundButton\') }}\n                </sw-button-process>\n            {% endblock %}\n\n            {% block unzer_payment_actions_default_button %}\n                <sw-button :disabled="true" v-else>\n                    {{ $tc(\'unzer-payment.paymentDetails.actions.defaultButton\') }}\n                </sw-button>\n            {% endblock %}\n\n            {% block unzer_payment_actions_button_container_inner %}{% endblock %}\n        </div>\n\n        <template v-if="isRefundPossible">\n            <div class="unzer-payment-actions--reason-code">\n                {% block unzer_payment_actions_reason_field %}\n                    <sw-single-select :options="reasonCodeSelection"\n                                      :disabled="maxTransactionAmount <= 0 || transactionAmount <= 0"\n                                      v-model="reasonCode"\n                                      :placeholder="$tc(\'unzer-payment.paymentDetails.actions.reason.placeholder\')"\n                                      :popoverClasses="[\'unzer-payment-actions--popover-options\']"\n                    >\n                    </sw-single-select>\n                {% endblock %}\n            </div>\n        </template>\n    </sw-container>\n{% endblock %}\n',inject:["UnzerPaymentService"],mixins:[r.getByName("notification")],data:function(){return{isLoading:!1,isSuccessful:!1,transactionAmount:0,reasonCode:null}},props:{transactionResource:{type:Object,required:!0},paymentResource:{type:Object,required:!0},decimalPrecision:{type:Number,required:!0,default:4}},computed:{isChargePossible:function(){return"authorization"===this.transactionResource.type},isRefundPossible:function(){return"charge"===this.transactionResource.type},maxTransactionAmount:function(){var e=0;return this.isRefundPossible&&(e=this.transactionResource.amount),this.isChargePossible&&(e=this.paymentResource.amount.remaining),"remainingAmount"in this.transactionResource&&(e=this.transactionResource.remainingAmount),e/Math.pow(10,this.paymentResource.amount.decimalPrecision)},reasonCodeSelection:function(){return[{label:this.$tc("unzer-payment.paymentDetails.actions.reason.cancel"),value:o},{label:this.$tc("unzer-payment.paymentDetails.actions.reason.credit"),value:c},{label:this.$tc("unzer-payment.paymentDetails.actions.reason.return"),value:s}]}},created:function(){this.transactionAmount=this.maxTransactionAmount},methods:{charge:function(){var e=this;this.isLoading=!0,this.UnzerPaymentService.chargeTransaction(this.paymentResource.orderId,this.transactionResource.id,this.transactionAmount).then((function(){e.createNotificationSuccess({title:e.$tc("unzer-payment.paymentDetails.notifications.chargeSuccessTitle"),message:e.$tc("unzer-payment.paymentDetails.notifications.chargeSuccessMessage")}),e.isSuccessful=!0,e.$emit("reload")})).catch((function(t){var n=t.response.data.errors[0];"generic-error"===n&&(n=e.$tc("unzer-payment.paymentDetails.notifications.genericErrorMessage")),"paylater-invoice-document-required"===n&&(n=e.$tc("unzer-payment.paymentDetails.notifications.paylaterInvoiceDocumentRequiredErrorMessage")),e.createNotificationError({title:e.$tc("unzer-payment.paymentDetails.notifications.chargeErrorTitle"),message:n}),e.isLoading=!1}))},refund:function(){var e=this;this.isLoading=!0,this.UnzerPaymentService.refundTransaction(this.paymentResource.orderId,this.transactionResource.id,this.transactionAmount,this.reasonCode).then((function(){e.createNotificationSuccess({title:e.$tc("unzer-payment.paymentDetails.notifications.refundSuccessTitle"),message:e.$tc("unzer-payment.paymentDetails.notifications.refundSuccessMessage")}),e.isSuccessful=!0,e.$emit("reload")})).catch((function(t){var n=t.response.data.errors[0];"generic-error"===n&&(n=e.$tc("unzer-payment.paymentDetails.notifications.genericErrorMessage")),e.createNotificationError({title:e.$tc("unzer-payment.paymentDetails.notifications.refundErrorTitle"),message:n}),e.isLoading=!1}))}}});var l=Shopware,u=l.Component,d=l.Mixin,p=l.Module;u.register("unzer-payment-detail",{template:'{% block unzer_payment_detail %}\n    <sw-card class="unzer-payment-detail" :title="$tc(\'unzer-payment.paymentDetails.detail.cardTitle\')">\n        <template>\n            {% block unzer_payment_detail_container %}\n                <sw-container columns="1fr 1fr" gap="0 20px">\n                    {% block unzer_payment_detail_container_left %}\n                        <sw-description-list class="unzer-payment-detail">\n                            <dt>{{ $tc(\'unzer-payment.paymentDetails.detail.amountRemaining\') }}</dt>\n                            <dd>{{ remainingAmount | currency(paymentResource.currency) }}</dd>\n\n                            <dt>{{ $tc(\'unzer-payment.paymentDetails.detail.amountCancelled\') }}</dt>\n                            <dd>{{ cancelledAmount | currency(paymentResource.currency) }}</dd>\n\n                            <dt>{{ $tc(\'unzer-payment.paymentDetails.detail.amountCharged\') }}</dt>\n                            <dd>{{ chargedAmount | currency(paymentResource.currency) }}</dd>\n\n                            {% block unzer_payment_detail_container_left_inner %}{% endblock %}\n                        </sw-description-list>\n                    {% endblock %}\n\n                    {% block unzer_payment_detail_container_right %}\n                        <sw-description-list class="unzer-payment-detail">\n                            <dt>{{ $tc(\'unzer-payment.paymentDetails.detail.shortId\') }}</dt>\n                            <dd>{{ paymentResource.shortId }}</dd>\n\n                            <dt>{{ $tc(\'unzer-payment.paymentDetails.detail.id\') }}</dt>\n                            <dd>{{ paymentResource.id }}</dd>\n\n                            <dt>{{ $tc(\'unzer-payment.paymentDetails.detail.state\') }}</dt>\n                            <dd>{{ paymentResource.state.name }}</dd>\n\n                            <span v-if="paymentResource.paymentMethodId === paylaterInvoicePaymentMethodId">\n                                <dt>{{ $tc(\'unzer-payment.paymentDetails.detail.descriptor\') }}</dt>\n                                <dd>{{ paymentResource.descriptor }}</dd>\n                            </span>\n\n                            {% block unzer_payment_detail_container_right_inner %}{% endblock %}\n                        </sw-description-list>\n                    {% endblock %}\n                </sw-container>\n            {% endblock %}\n        </template>\n\n        {% block unzer_payment_detail_footer %}\n            <template #footer v-if="paymentResource.isShipmentAllowed">\n                {% block unzer_payment_detail_ship_button %}\n                    <sw-button-process :isLoading="isLoading" :processSuccess="isSuccessful" @click="ship">\n                        {{ $tc(\'unzer-payment.paymentDetails.actions.shipButton\') }}\n                    </sw-button-process>\n                {% endblock %}\n            </template>\n        {% endblock %}\n    </sw-card>\n{% endblock %}\n',inject:["UnzerPaymentService"],mixins:[d.getByName("notification")],data:function(){return{isLoading:!1,isSuccessful:!1,paylaterInvoicePaymentMethodId:"09588ffee8064f168e909ff31889dd7f"}},props:{paymentResource:{type:Object,required:!0}},computed:{unzerMaxDigits:function(){var e=p.getModuleRegistry().get("unzer-payment");return e&&e.manifest?e.manifest.maxDigits:4},remainingAmount:function(){return this.paymentResource&&this.paymentResource.amount?this.formatAmount(this.paymentResource.amount.remaining,this.paymentResource.amount.decimalPrecision):0},cancelledAmount:function(){return this.paymentResource&&this.paymentResource.amount?this.formatAmount(this.paymentResource.amount.cancelled,this.paymentResource.amount.decimalPrecision):0},chargedAmount:function(){return this.paymentResource&&this.paymentResource.amount?this.formatAmount(this.paymentResource.amount.charged,this.paymentResource.amount.decimalPrecision):0}},methods:{ship:function(){var e=this;this.isLoading=!0,this.UnzerPaymentService.ship(this.paymentResource.orderId).then((function(){e.createNotificationSuccess({title:e.$tc("unzer-payment.paymentDetails.notifications.shipSuccessTitle"),message:e.$tc("unzer-payment.paymentDetails.notifications.shipSuccessMessage")}),e.isSuccessful=!0,e.$emit("reload")})).catch((function(t){var n=t.response.data.errors[0];"generic-error"===n?n=e.$tc("unzer-payment.paymentDetails.notifications.genericErrorMessage"):"invoice-missing-error"===n?n=e.$tc("unzer-payment.paymentDetails.notifications.invoiceNotFoundMessage"):"documentdate-missing-error"===n?n=e.$tc("unzer-payment.paymentDetails.notifications.documentDateMissingError"):"payment-missing-error"===n&&(n=e.$tc("unzer-payment.paymentDetails.notifications.paymentMissingError")),e.createNotificationError({title:e.$tc("unzer-payment.paymentDetails.notifications.shipErrorTitle"),message:n}),e.isLoading=!1}))},formatAmount:function(e,t){return e/Math.pow(10,Math.min(this.unzerMaxDigits,t))}}});var m=Shopware,f=m.Component,h=m.Module;f.register("unzer-payment-history",{template:'{% block unzer_payment_history %}\n    <sw-card :title="$tc(\'unzer-payment.paymentDetails.history.cardTitle\')">\n        {% block unzer_payment_history_container %}\n            <template #grid>\n                {% block unzer_payment_history_data_grid %}\n                    <sw-data-grid\n                        :dataSource="data"\n                        :columns="columns"\n                        :showSelection="false"\n                        sortBy="date">\n\n                        {% block unzer_payment_history_actions %}\n                            <template #actions="{ item }">\n                                {% block unzer_payment_history_data_grid_item_actions %}\n                                    <unzer-payment-actions\n                                        :transactionResource="item.resource"\n                                        :paymentResource="paymentResource"\n                                        :decimalPrecision="decimalPrecision"\n                                        @reload="reloadPaymentDetails">\n                                    </unzer-payment-actions>\n                                {% endblock %}\n                            </template>\n                        {% endblock %}\n                    </sw-data-grid>\n                {% endblock %}\n            </template>\n        {% endblock %}\n    </sw-card>\n{% endblock %}\n',inject:["repositoryFactory"],props:{paymentResource:{type:Object,required:!0}},computed:{unzerMaxDigits:function(){var e=h.getModuleRegistry().get("unzer-payment");return e&&e.manifest?e.manifest.maxDigits:4},orderTransactionRepository:function(){return this.repositoryFactory.create("order_transaction")},decimalPrecision:function(){return this.paymentResource&&this.paymentResource.amount&&this.paymentResource.amount.decimalPrecision?Math.min(this.unzerMaxDigits,this.paymentResource.amount.decimalPrecision):this.unzerMaxDigits},data:function(){var e=this,t=[];return Object.values(this.paymentResource.transactions).forEach((function(n){var a=e.$options.filters.currency(e.formatAmount(parseFloat(n.amount),e.decimalPrecision),e.paymentResource.currency),i=e.$options.filters.date(n.date,{hour:"numeric",minute:"numeric",second:"numeric"});t.push({type:e.transactionTypeRenderer(n.type),amount:a,date:i,resource:n})})),t},columns:function(){return[{property:"type",label:this.$tc("unzer-payment.paymentDetails.history.column.type"),rawData:!0},{property:"amount",label:this.$tc("unzer-payment.paymentDetails.history.column.amount"),rawData:!0},{property:"date",label:this.$tc("unzer-payment.paymentDetails.history.column.date"),rawData:!0}]}},methods:{transactionTypeRenderer:function(e){switch(e){case"authorization":return this.$tc("unzer-payment.paymentDetails.history.type.authorization");case"charge":return this.$tc("unzer-payment.paymentDetails.history.type.charge");case"shipment":return this.$tc("unzer-payment.paymentDetails.history.type.shipment");case"cancellation":return this.$tc("unzer-payment.paymentDetails.history.type.cancellation");default:return this.$tc("unzer-payment.paymentDetails.history.type.default")}},reloadPaymentDetails:function(){this.$emit("reload")},formatAmount:function(e,t){return e/Math.pow(10,t)}}});Shopware.Component.register("unzer-payment-metadata",{template:'{% block unzer_payment_metadata %}\n    <sw-card class="unzer-payment-metadata" :title="$tc(\'unzer-payment.paymentDetails.metadata.cardTitle\')">\n        <template #grid>\n            {% block unzer_payment_metadata_container %}\n                <sw-data-grid\n                    :dataSource="data"\n                    :columns="columns"\n                    :showSelection="false"\n                    :showActions="false">\n                </sw-data-grid>\n            {% endblock %}\n        </template>\n    </sw-card>\n{% endblock %}\n',props:{paymentResource:{type:Object,required:!0}},computed:{data:function(){var e=[];return this.paymentResource.metadata.forEach((function(t){e.push({key:t.key,value:t.value})})),e},columns:function(){return[{property:"key",label:this.$tc("unzer-payment.paymentDetails.metadata.column.key"),rawData:!0},{property:"value",label:this.$tc("unzer-payment.paymentDetails.metadata.column.value"),rawData:!0}]}}});Shopware.Component.register("unzer-payment-basket",{template:'{% block unzer_payment_basket %}\n    <sw-card class="unzer-payment-basket" :title="$tc(\'unzer-payment.paymentDetails.basket.cardTitle\')">\n        <template #grid>\n            {% block unzer_payment_basket_container %}\n                <sw-data-grid\n                    :dataSource="data"\n                    :columns="columns"\n                    :showSelection="false"\n                    :showActions="false">\n                </sw-data-grid>\n            {% endblock %}\n        </template>\n    </sw-card>\n{% endblock %}\n',props:{paymentResource:{type:Object,required:!0}},computed:{data:function(){var e=this,t=[];return this.paymentResource.basket.basketItems.forEach((function(n){var a=e.$options.filters.currency(parseFloat(n.amountGross.toFixed(2)),e.paymentResource.currency),i=e.$options.filters.currency(parseFloat(n.amountNet.toFixed(2)),e.paymentResource.currency);n.amountDiscount>0&&(a=e.$options.filters.currency(-1*parseFloat(n.amountDiscount.toFixed(2)),e.paymentResource.currency),i=e.$options.filters.currency(-1*parseFloat((n.amountDiscount-n.amountVat).toFixed(2)),e.paymentResource.currency)),t.push({quantity:n.quantity,title:n.title,amountGross:a,amountNet:i})})),t},columns:function(){return[{property:"quantity",label:this.$tc("unzer-payment.paymentDetails.basket.column.quantity"),rawData:!0},{property:"title",label:this.$tc("unzer-payment.paymentDetails.basket.column.title"),rawData:!0},{property:"amountGross",label:this.$tc("unzer-payment.paymentDetails.basket.column.amountGross"),rawData:!0},{property:"amountNet",label:this.$tc("unzer-payment.paymentDetails.basket.column.amountNet"),rawData:!0}]}}});var y=Shopware.Data.Criteria,g=["bc4c2cbfb5fda0bf549e4807440d0a54","4673044aff79424a938d42e9847693c3","713c7a332b432dcd4092701eda522a7e","5123af5ce94a4a286641973e8de7eb60","17830aa7e6a00b99eab27f0e45ac5e0d","4ebb99451f36ba01f13d5871a30bce2c","d4b90a17af62c1bb2f6c3b1fed339425","4b9f8d08b46a83839fd0eb14fe00efe6","08fb8d9a72ab4ca62b811e74f2eca79f","6cc3b56ce9b0f80bd44039c047282a41","614ad722a03ee96baa2446793143215b","409fe641d6d62a4416edd6307d758791","085b64d0028a8bd447294e03c4eb411a","cd6f59d572e6c90dff77a48ce16b44db","95aa098aac8f11e9a2a32a2ae2dbcce4","fd96d03535a46d197f5adac17c9f8bac","09588ffee8064f168e909ff31889dd7f"];Shopware.Component.override("sw-order-create-details-footer",{template:'{% block sw_order_create_details_footer_payment_method %}\n    <sw-entity-single-select size="small"\n        entity="payment_method"\n        v-model="context.paymentMethodId"\n        class="sw-order-create-details-footer__item"\n        :disabled="!isCustomerActive"\n        :criteria="paymentMethodCriteria"\n        :label="$tc(\'sw-order.createBase.detailsFooter.labelPaymentMethod\')"\n        :placeholder="$tc(\'sw-order.createBase.detailsFooter.placeholderPaymentMethod\')"></sw-entity-single-select>\n{% endblock %}\n',computed:{paymentMethodCriteria:function(){var e=new y;return this.salesChannelId&&e.addFilter(y.equals("salesChannels.id",this.salesChannelId)),e.addFilter(y.not("AND",[y.equalsAny("id",g)])),e}}});var b=Shopware,v=b.Component,w=b.Context,k=Shopware.Data.Criteria;v.override("sw-order-detail",{template:"{% block sw_order_detail_content_tabs_general %}\n    {% parent %}\n\n    {% block unzer_payment_payment_tab %}\n        <sw-tabs-item v-if=\"isUnzerPayment\"\n                      :route=\"{ name: 'unzer-payment.payment.detail', params: { id: $route.params.id } }\"\n                      :title=\"$tc('unzer-payment.tabTitle')\">\n            {{ $tc('unzer-payment.tabTitle') }}\n        </sw-tabs-item>\n    {% endblock %}\n{% endblock %}\n",data:function(){return{isUnzerPayment:!1}},computed:{showTabs:function(){return!0}},watch:{orderId:{deep:!0,handler:function(){var e=this;if(this.orderId){var t=this.repositoryFactory.create("order"),n=new k(1,1);n.addAssociation("transactions"),t.get(this.orderId,w.api,n).then((function(t){t.transactions.forEach((function(t){t.customFields&&(t.customFields.unzer_payment_is_transaction||t.customFields.heidelpay_is_transaction)&&(e.isUnzerPayment=!0)}))}))}else this.isUnzerPayment=!1},immediate:!0}}});Shopware.Component.override("sw-order-list",{template:'{% block sw_order_list_grid_columns %}\n    {% parent %}\n\n    {% block unzer_payment_column_transaction %}\n        <template #column-unzerPaymentTransactionId="{ item }">\n            <b v-if="item.transactions && item.transactions.last() && item.transactions.last().customFields && item.transactions.last().customFields.unzer_payment_is_transaction">\n                {{ item.transactions.last().id }}\n            </b>\n        </template>\n    {% endblock %}\n{% endblock %}\n',methods:{getOrderColumns:function(){var e=this.$super("getOrderColumns");return e.splice(1,0,{property:"unzerPaymentTransactionId",label:"unzer-payment.order-list.transactionId",allowResize:!0}),e}}});var C=Shopware,z=C.Component,_=C.Context,S=C.Mixin,P=Shopware.Data.Criteria;z.register("unzer-payment-tab",{template:'{% block unzer_payment_payment_details %}\n    <div class="unzer-payment-detail">\n        <div v-if="!isLoading">\n            {% block unzer_payment_payment_details_content %}\n                <template v-for="paymentResource in paymentResources">\n                    {% block unzer_payment_payment_details_content_payment_detail %}\n                        <unzer-payment-detail\n                            :paymentResource="paymentResource"\n                            @reload="reloadPaymentDetails">\n                        </unzer-payment-detail>\n                    {% endblock %}\n\n                    {% block unzer_payment_payment_details_content_payment_history %}\n                        <unzer-payment-history\n                            :paymentResource="paymentResource"\n                            @reload="reloadPaymentDetails">\n                        </unzer-payment-history>\n                    {% endblock %}\n\n                    {% block unzer_payment_payment_details_content_payment_basket %}\n                        <unzer-payment-basket\n                            :paymentResource="paymentResource"\n                            @reload="reloadPaymentDetails">\n                        </unzer-payment-basket>\n                    {% endblock %}\n\n                    {% block unzer_payment_payment_details_content_payment_metadata %}\n                        <unzer-payment-metadata\n                            :paymentResource="paymentResource"\n                            @reload="reloadPaymentDetails">\n                        </unzer-payment-metadata>\n                    {% endblock %}\n\n                    {% block unzer_payment_payment_details_content_inner %}{% endblock %}\n                </template>\n            {% endblock %}\n        </div>\n\n        <sw-loader v-if="isLoading"></sw-loader>\n    </div>\n{% endblock %}\n',inject:["UnzerPaymentService","repositoryFactory"],mixins:[S.getByName("notification")],data:function(){return{paymentResources:[],isLoading:!0}},created:function(){this.createdComponent()},computed:{orderRepository:function(){return this.repositoryFactory.create("order")}},watch:{$route:function(){this.resetDataAttributes(),this.createdComponent()}},methods:{createdComponent:function(){this.loadData()},resetDataAttributes:function(){this.paymentResources=[],this.isLoading=!0},reloadPaymentDetails:function(){this.resetDataAttributes(),this.loadData()},loadData:function(){var e=this,t=this.$route.params.id,n=new P;n.addAssociation("transactions"),this.orderRepository.get(t,_.api,n).then((function(t){e.order=t,t.transactions&&t.transactions.forEach((function(t){t.customFields&&(t.customFields.unzer_payment_is_transaction||t.customFields.heidelpay_is_transaction)&&e.UnzerPaymentService.fetchPaymentDetails(t.id).then((function(t){e.isLoading=!1,e.paymentResources.push(t)})).catch((function(){e.createNotificationError({title:e.$tc("unzer-payment.paymentDetails.notifications.genericErrorMessage"),message:e.$tc("unzer-payment.paymentDetails.notifications.couldNotRetrieveMessage")}),e.isLoading=!1}))}))}))}}});var I=n("J1dr"),D=n("6hRc");Shopware.Module.register("unzer-payment",{type:"plugin",name:"UnzerPayment",title:"unzer-payment.general.title",description:"unzer-payment.general.descriptionTextModule",version:"0.0.1",targetVersion:"0.0.1",maxDigits:4,snippets:{"de-DE":I,"en-GB":D},routeMiddleware:function(e,t){"sw.order.detail"===t.name&&t.children.push({component:"unzer-payment-tab",name:"unzer-payment.payment.detail",path:"/sw/order/detail/:id/unzer-payment",isChildren:!0,meta:{parentPath:"sw.order.index"}}),e(t)}});n("I7rx");var R=Shopware.Data.Criteria;Shopware.Component.register("unzer-payment-register-webhook",{template:'{% block unzer_payment_payment_register_webhook %}\n    <div class="register-webhook--container">\n        {% block unzer_payment_payment_register_webhook_button %}\n            <sw-button-process\n                :isLoading="isRegistering || isLoading"\n                :disabled="isLoading"\n                :processSuccess="isRegistrationSuccessful"\n                @process-finish="onRegistrationFinished()"\n                @click="openModal">\n                {{ $tc(\'unzer-payment-settings.form.webhookButton\') }}\n            </sw-button-process>\n        {% endblock %}\n\n        {% block unzer_payment_payment_register_webhook_modal %}\n            <sw-modal v-if="isModalActive" @modal-close="closeModal"\n                      :title="$tc(`unzer-payment-settings.modal.webhook.title`)"\n                      class="unzer-payment-detail--webhook-modal">\n\n                <template #default>\n                    <sw-alert\n                        variant="info"\n                        appearance="default"\n                        :showIcon="true"\n                        :closable="false">\n                        {{ $tc(\'unzer-payment-settings.modal.webhook.httpsInfo\') }}\n                    </sw-alert>\n\n                    <sw-card\n                        v-for="salesChannel in salesChannels"\n                        v-if="!selectedSalesChannelId || selectedSalesChannelId === salesChannel.id"\n                        :isLoading="isDataLoading"\n                        :key="salesChannel.id"\n                        :title="salesChannel.translated.name"\n                        :large="true"\n                        >\n\n                        <sw-entity-single-select\n                            v-if="!isWebhookRegisteredForSalesChannel(salesChannel.id)"\n                            v-model="selection[salesChannel.id]"\n                            :disableSearchFunction="true"\n                            :placeholder="$tc(`unzer-payment-settings.modal.webhook.placeholder`)"\n                            :criteria="getSalesChannelDomainCriteria(salesChannel.id)"\n                            entity="sales_channel_domain"\n                            labelProperty="url"\n                            @change="onSelectItem">\n                        </sw-entity-single-select>\n\n                        <sw-alert\n                            v-else\n                            variant="success"\n                            appearance="default"\n                            :showIcon="true"\n                            :closable="false">\n                            {{ $tc(\'unzer-payment-settings.modal.webhook.registered\') }}\n                        </sw-alert>\n                    </sw-card>\n\n                    <sw-pagination\n                        :total="salesChannels.total"\n                        :limit="salesChannels.criteria.limit"\n                        :page="salesChannels.criteria.page"\n                        :steps="[2,10,25,100]"\n                        @page-change="onPageChange">\n                    </sw-pagination>\n\n                </template>\n\n                <template #modal-footer>\n\n                    <sw-button :disabled="isLoading" @click="closeModal">\n                        {{ $tc(\'unzer-payment-settings.modal.close\') }}\n                    </sw-button>\n\n                    <sw-button-process\n                        @click="registerWebhooks"\n                        @process-finish="onRegistrationFinished()"\n                        :isLoading="isLoading" :processSuccess="isRegistrationSuccessful" :disabled="isLoading"\n                        variant="primary">\n                        {{ $tc(\'unzer-payment-settings.modal.webhook.submit.register\') }}\n                    </sw-button-process>\n                </template>\n            </sw-modal>\n        {% endblock %}\n    </div>\n{% endblock %}\n',mixins:[Shopware.Mixin.getByName("notification")],inject:["repositoryFactory","UnzerPaymentConfigurationService"],props:{webhooks:{type:Array,required:!0},isLoading:{type:Boolean,required:!1},selectedSalesChannelId:{type:String,required:!1}},computed:{salesChannelRepository:function(){return this.repositoryFactory.create("sales_channel")}},data:function(){return{isModalActive:!1,isRegistering:!1,isRegistrationSuccessful:!1,isDataLoading:!1,selection:{},entitySelection:{},salesChannels:{}}},created:function(){this.createdComponent()},methods:{createdComponent:function(){this.loadData()},loadData:function(e,t){var n=this;n.isDataLoading=!0;var a=new R(e,t);a.addAssociation("domains"),this.salesChannelRepository.search(a,Shopware.Context.api).then((function(e){n.salesChannels=e,n.isDataLoading=!1}))},onPageChange:function(e){this.loadData(e.page,e.limit)},openModal:function(){this.isModalActive=!0},closeModal:function(){this.isModalActive=!1},registerWebhooks:function(){var e=this,t=this;this.isRegistrationSuccessful=!1,this.isRegistering=!0,this.UnzerPaymentConfigurationService.registerWebhooks({selection:this.entitySelection}).then((function(n){t.isRegistrationSuccessful=!0,void 0!==n&&t.messageGeneration(n),e.$emit("webhook-registered",n)})).catch((function(){e.createNotificationError({title:e.$tc("unzer-payment-settings.webhook.globalError.title"),message:e.$tc("unzer-payment-settings.webhook.globalError.message")})})).finally((function(){t.isRegistering=!1}))},onRegistrationFinished:function(){this.isRegistrationSuccessful=!1,this.selection={}},onSelectItem:function(e,t){this.entitySelection[t.salesChannelId]=t},messageGeneration:function(e){var t=this,n=e.length;Object.keys(e).forEach((function(a){e[a].success?t.createNotificationSuccess({title:t.$tc(e[a].message,n),message:t.$tc("unzer-payment-settings.webhook.messagePrefix",n)+a}):t.createNotificationError({title:t.$tc(e[a].message,n),message:t.$tc("unzer-payment-settings.webhook.messagePrefix",n)+a})}))},isWebhookRegisteredForSalesChannel:function(e){var t=this,n=!1;return this.getSalesChannelById(e).domains.forEach((function(e){t.webhooks.forEach((function(t){if(t.url.indexOf(e.url)>-1)return n=!0,!0}))})),n},getSalesChannelById:function(e){var t=null;return this.salesChannels.forEach((function(n){if(n.id===e)return t=n,!0})),t},getSalesChannelDomainCriteria:function(e){var t=new R;return t.addFilter(R.prefix("url","https://")),t.addFilter(R.equals("salesChannelId",e)),t}}});n("AuU3");Shopware.Component.register("unzer-payment-apple-pay-certificates",{template:'{% block unzer_payment_apple_pay_certificates %}\n    <sw-container :title="$tc(`unzer-payment-settings.apple-pay.certificates.title`)"\n                  class="unzer-payment-settings--apple-pay-certificates">\n        <template v-show="!isLoading">\n            {% block unzer_payment_apple_pay_certificates_form %}\n                <sw-inherit-wrapper\n                    ref="inheritWrapperPaymentProcessingCertificate"\n                    :label="$tc(\'unzer-payment-settings.apple-pay.paymentProcessingCertificate.label\')"\n                    v-model="parentConfigData[\'UnzerPayment6.settings.applePayPaymentProcessingCertificateId\']"\n                    :inheritedValue="getInheritedValue(\'applePayPaymentProcessingCertificateId\')"\n                    :hasParent="isNotDefaultSalesChannel"\n                    >\n                    <template #content="props">\n                        <sw-label\n                            v-if="!isDataLoading"\n                            :variant="paymentProcessingValid ? \'success\' : \'danger\'"\n                            appearance="pill"\n                            v-tooltip="$tc(\'unzer-payment-settings.apple-pay.certificates.check.paymentProcessingValid.\' + paymentProcessingValid.toString())">\n                            <sw-icon :name="paymentProcessingValid ? \'default-basic-checkmark-circle\' : \'default-badge-alert\'" :small="true"></sw-icon>\n                            <span v-html="$tc(\'unzer-payment-settings.apple-pay.certificates.check.paymentProcessingValid.\' + paymentProcessingValid.toString())"></span>\n                        </sw-label>\n                        <sw-loader size="10px" v-else></sw-loader>\n                        <br>\n                        <small v-html="$tc(\'unzer-payment-settings.apple-pay.paymentProcessingCertificate.helpText\')"></small>\n\n                        <sw-file-input\n                            ref="paymentProcessingCertificateInput"\n                            class="sw-field sw-block-field"\n                            v-model="paymentProcessingCertificate"\n                            @change="onInputChangePaymentProcessing"\n                        >\n                        </sw-file-input>\n                    </template>\n                </sw-inherit-wrapper>\n\n                <sw-inherit-wrapper\n                    ref="inheritWrapperPaymentProcessingKey"\n                    :label="$tc(\'unzer-payment-settings.apple-pay.paymentProcessingKey.label\')"\n                    v-model="parentConfigData[\'UnzerPayment6.settings.applePayPaymentProcessingCertificateId\']"\n                    :inheritedValue="getInheritedValue(\'applePayPaymentProcessingCertificateId\')"\n                    :hasParent="isNotDefaultSalesChannel"\n                >\n                    <template #content="props">\n                        <sw-file-input\n                            ref="paymentProcessingKeyInput"\n                            class="sw-field sw-block-field"\n                            v-model="paymentProcessingKey"\n                            @change="onInputChangePaymentProcessing"\n                        >\n                        </sw-file-input>\n                    </template>\n                </sw-inherit-wrapper>\n\n                <sw-inherit-wrapper\n                    ref="inheritWrapperMerchantIdentificationCertificate"\n                    :label="$tc(\'unzer-payment-settings.apple-pay.merchantIdentificationCertificate.label\')"\n                    v-model="parentConfigData[\'UnzerPayment6.settings.applePayMerchantIdentificationCertificateId\']"\n                    :inheritedValue="getInheritedValue(\'applePayMerchantIdentificationCertificateId\')"\n                    :hasParent="isNotDefaultSalesChannel"\n                >\n                    <template #content="props">\n                        <sw-label\n                            v-if="!isDataLoading"\n                            :variant="merchantIdentificationValid ? \'success\' : \'danger\'"\n                            appearance="pill"\n                            v-tooltip="$tc(\'unzer-payment-settings.apple-pay.certificates.check.merchantIdentificationValid.\' + merchantIdentificationValid.toString())">\n                            <sw-icon :name="merchantIdentificationValid ? \'default-basic-checkmark-circle\' : \'default-badge-alert\'" :small="true"></sw-icon>\n                            <span v-html="$tc(\'unzer-payment-settings.apple-pay.certificates.check.merchantIdentificationValid.\' + merchantIdentificationValid.toString())"></span>\n                        </sw-label>\n                        <sw-loader size="10px" v-else></sw-loader>\n                        <br>\n                        <sw-label\n                            v-if="!isDataLoading && merchantIdentificationValidUntil !== null"\n                            :variant="(merchantIdentificationValidUntil > now) ? \'success\' : \'warning\'"\n                            appearance="pill"\n                            v-tooltip="$tc(\'unzer-payment-settings.apple-pay.certificates.check.merchantIdentificationValidUntil.\' + (merchantIdentificationValidUntil > now).toString())">\n                            <sw-icon name="default-time-clock" :small="true"></sw-icon>\n                            <span v-html="$tc(\'unzer-payment-settings.apple-pay.certificates.check.merchantIdentificationValidUntil.\' + (merchantIdentificationValidUntil > now).toString())"></span>\n                        </sw-label>\n                        <br>\n                        <small v-html="$tc(\'unzer-payment-settings.apple-pay.merchantIdentificationCertificate.helpText\')"></small>\n\n                        <sw-file-input\n                            ref="merchantIdentificationCertificateInput"\n                            class="sw-field sw-block-field"\n                            v-model="merchantIdentificationCertificate"\n                            @change="onInputChangeMerchantIdentification"\n                        >\n                        </sw-file-input>\n                    </template>\n                </sw-inherit-wrapper>\n\n                <sw-inherit-wrapper\n                    ref="inheritWrapperMerchantIdentificationKey"\n                    :label="$tc(\'unzer-payment-settings.apple-pay.merchantIdentificationKey.label\')"\n                    v-model="parentConfigData[\'UnzerPayment6.settings.applePayMerchantIdentificationCertificateId\']"\n                    :inheritedValue="getInheritedValue(\'applePayMerchantIdentificationCertificateId\')"\n                    :hasParent="isNotDefaultSalesChannel"\n                >\n                    <template #content="props">\n                        <sw-file-input\n                            ref="merchantIdentificationKeyInput"\n                            class="sw-field sw-block-field"\n                            v-model="merchantIdentificationKey"\n                            @change="onInputChangeMerchantIdentification"\n                        >\n                        </sw-file-input>\n                    </template>\n                </sw-inherit-wrapper>\n            {% endblock %}\n        </template>\n    </sw-container>\n{% endblock %}\n',mixins:[Shopware.Mixin.getByName("notification")],inject:["repositoryFactory","UnzerPaymentApplePayService"],props:{isLoading:{type:Boolean,required:!1},selectedSalesChannelId:{type:String,required:!1},parentRefs:{required:!0}},data:function(){return{isUpdating:!1,isUpdateSuccessful:!1,isDataLoading:!1,paymentProcessingCertificate:!1,paymentProcessingKey:!1,merchantIdentificationCertificate:!1,merchantIdentificationKey:!1,merchantIdentificationValid:!1,merchantIdentificationValidUntil:null,paymentProcessingValid:!1}},computed:{isNotDefaultSalesChannel:function(){return null!==this.selectedSalesChannelId},now:function(){return Date.now()},parentConfigData:function(){return this.parentRefs.systemConfig.actualConfigData[this.selectedSalesChannelId]||{}}},created:function(){this.createdComponent()},methods:{createdComponent:function(){this.loadData()},loadData:function(){this.checkCertificates()},checkCertificates:function(){var e=this,t=this;t.isDataLoading=!0,this.UnzerPaymentApplePayService.checkCertificates(this.selectedSalesChannelId).then((function(t){void 0!==t&&(e.merchantIdentificationValid=t.merchantIdentificationValid,e.merchantIdentificationValidUntil=t.merchantIdentificationValidUntil?new Date(t.merchantIdentificationValidUntil):null,e.paymentProcessingValid=t.paymentProcessingValid)})).finally((function(){t.isDataLoading=!1}))},onSave:function(){return this.updateCertificates()},resetFileFieldsMerchantIdentification:function(){this.$refs.merchantIdentificationCertificateInput.onRemoveIconClick(),this.$refs.merchantIdentificationKeyInput.onRemoveIconClick()},resetFileFieldsPaymentProcessing:function(){this.$refs.paymentProcessingCertificateInput.onRemoveIconClick(),this.$refs.paymentProcessingKeyInput.onRemoveIconClick()},updateCertificates:function(){var e=this,t=this;return this.isUpdateSuccessful=!1,this.isUpdating=!0,this.paymentProcessingCertificate||this.paymentProcessingKey||this.merchantIdentificationCertificate||this.merchantIdentificationKey||this.$refs.inheritWrapperMerchantIdentificationCertificate.isInherited||this.$refs.inheritWrapperPaymentProcessingCertificate.isInherited?this.UnzerPaymentApplePayService.updateCertificates(this.selectedSalesChannelId,{paymentProcessingCertificate:this.paymentProcessingCertificate,paymentProcessingKey:this.paymentProcessingKey,merchantIdentificationCertificate:this.merchantIdentificationCertificate,merchantIdentificationKey:this.merchantIdentificationKey},this.$refs.inheritWrapperMerchantIdentificationCertificate.isInherited,this.$refs.inheritWrapperPaymentProcessingCertificate.isInherited).then((function(n){t.isUpdateSuccessful=!0,t.createNotificationSuccess({title:t.$tc("unzer-payment-settings.apple-pay.certificates.update.success.title"),message:t.$tc("unzer-payment-settings.apple-pay.certificates.update.success.message")}),t.$emit("certificate-updated",n),t.parentRefs.systemConfig.loadCurrentSalesChannelConfig?t.parentRefs.systemConfig.loadCurrentSalesChannelConfig():(delete t.parentRefs.systemConfig.actualConfigData[e.selectedSalesChannelId],t.parentRefs.systemConfig.readAll()),t.checkCertificates(),t.resetFileFieldsPaymentProcessing(),t.resetFileFieldsMerchantIdentification()})).catch((function(e){var n="unzer-payment-settings.apple-pay.certificates.update.error.message";e&&e.response&&e.response.data&&e.response.data.message&&(n=e.response.data.message);var a={};e&&e.response&&e.response.data&&e.response.data.translationData&&(a=e.response.data.translationData),t.createNotificationError({title:t.$tc("unzer-payment-settings.apple-pay.certificates.update.error.title"),message:t.$t(n,a)})})).finally((function(){t.isUpdating=!1})):(this.isUpdateSuccessful=!0,this.isUpdating=!1,Promise.resolve())},onInputChangePaymentProcessing:function(e){e&&this.$refs.inheritWrapperPaymentProcessingCertificate.removeInheritance()},onInputChangeMerchantIdentification:function(e){e&&this.$refs.inheritWrapperMerchantIdentificationCertificate.removeInheritance()},getInheritedValue:function(e){var t=this.parentRefs.systemConfig;return t.getInheritedValue&&t.actualConfigData.null?t.getInheritedValue({name:"UnzerPayment6.settings."+e,type:"text"}):t.actualConfigData.null&&t.actualConfigData.null["UnzerPayment6.settings."+e]||null}}});Shopware.Component.register("unzer-payment-plugin-icon",{template:'{% block unzer_plugin_icon %}\n    <img class="unzer-payment-icon" :src="\'unzerpayment6/plugin.png\' | asset">\n{% endblock %}\n'});var $=Shopware.Component,x=Shopware.Context.app.config.version.match(/((\d+)\.?(\d+?)\.?(\d+)?\.?(\d*))-?([A-z]+?\d+)?/i);x&&6===parseInt(x[2])&&parseInt(x[3])<4&&$.override("sw-settings-index",{template:'{% block sw_settings_content_card_slot_plugins %}\n    {% parent %}\n\n    <sw-settings-item :label="$tc(\'unzer-payment-settings.module.title\')"\n                      :to="{ name: \'unzer.payment.configuration.settings\' }"\n                      :backgroundEnabled="false">\n        <template #icon>\n            <img class="unzer-payment-icon" :src="\'unzerpayment6/plugin.png\' | asset">\n        </template>\n    </sw-settings-item>\n{% endblock %}\n'});Shopware.Component.override("sw-system-config",{template:'{% block sw_system_config_content_card_field %}\n    <template v-if="element.name != \'UnzerPayment6.settings.applePayPaymentProcessingCertificateId\' && element.name != \'UnzerPayment6.settings.applePayMerchantIdentificationCertificateId\'">\n        {% parent() %}\n\n        <template v-if="element.name == \'UnzerPayment6.settings.publicKey\' && ((actualConfigData[currentSalesChannelId] && actualConfigData[currentSalesChannelId][\'UnzerPayment6.settings.applePayPaymentProcessingCertificateId\']) || (actualConfigData.null && actualConfigData.null[\'UnzerPayment6.settings.applePayPaymentProcessingCertificateId\']))">\n            <sw-label\n                variant="info"\n                appearance="pill">\n                <sw-icon name="default-badge-info" :small="true"></sw-icon>\n                <small v-html="$tc(\'unzer-payment-settings.apple-pay.publicKey.changeNotice\')"></small>\n            </sw-label>\n            <br><br>\n        </template>\n    </template>\n{% endblock %}\n',methods:{onSalesChannelChanged:function(e){this.$super("onSalesChannelChanged",e),this.$emit("sales-channel-changed",this.actualConfigData[this.currentSalesChannelId],this.currentSalesChannelId)}}});n("0I75");var T=Shopware,M=T.Component,E=T.Mixin,L=T.Context;M.register("unzer-payment-settings",{template:'{% block unzer_payment_settings %}\n    <sw-page class="unzer-payment-settings">\n        {% block unzer_payment_settings_header %}\n            <template #smart-bar-header>\n                <h2>\n                    {{ $tc(\'sw-settings.index.title\') }}\n                    <sw-icon :name="arrowIconName" small></sw-icon>\n                    {{ $tc(\'unzer-payment-settings.module.title\') }}\n                </h2>\n            </template>\n        {% endblock %}\n\n        {% block unzer_payment_settings_actions %}\n            <template #smart-bar-actions>\n                {% block unzer_payment_settings_actions_save %}\n                    <sw-button-process\n                        class="sw-settings-login-registration__save-action"\n                        :isLoading="isLoading"\n                        :disabled="isLoading || isTesting"\n                        :processSuccess="isSaveSuccessful"\n                        variant="primary"\n                        @click="onSave">\n                        {{ $tc(\'global.default.save\') }}\n                    </sw-button-process>\n                {% endblock %}\n\n                {% block unzer_payment_settings_actions_test %}\n                    <sw-button-process\n                        :isLoading="isTesting || isLoading"\n                        :disabled="isLoading || isTesting"\n                        :processSuccess="isTestSuccessful"\n                        @process-finish="onTestFinished()"\n                        @click="onValidateCredentials">\n                        {{ $tc(\'unzer-payment-settings.form.testButton\') }}\n                    </sw-button-process>\n                {% endblock %}\n\n                {% block unzer_payment_settings_actions_register_webhooks %}\n                    <unzer-payment-register-webhook\n                        :isLoading="isLoading"\n                        :webhooks="webhooks"\n                        :selectedSalesChannelId="selectedSalesChannelId"\n                        @webhook-registered="onWebhookRegistered">\n                    </unzer-payment-register-webhook>\n                {% endblock %}\n\n            </template>\n        {% endblock %}\n\n        {% block unzer_payment_settings_content %}\n            <template #content>\n                <sw-card-view>\n                    <sw-system-config\n                        ref="systemConfig"\n                        salesChannelSwitchable\n                        inherit\n                        @config-changed="onConfigChange"\n                        @loading-changed="onLoadingChanged"\n                        @sales-channel-changed="onSalesChannelChanged"\n                        domain="UnzerPayment6.settings">\n                    </sw-system-config>\n\n                    <sw-card\n                        :is-loading="isLoading"\n                        :title="$tc(`unzer-payment-settings.apple-pay.certificates.title`)"\n                        class="unzer--apple-pay-card"\n                    >\n                        <unzer-payment-apple-pay-certificates\n                            ref="applePayCertificates"\n                            :selectedSalesChannelId="selectedSalesChannelId"\n                            :parentRefs="$refs"\n                            :isLoading="isLoading">\n                        </unzer-payment-apple-pay-certificates>\n                    </sw-card>\n\n                    <sw-card :title="$tc(`unzer-payment-settings.modal.webhook.title`)" class="unzer--webhook-card">\n                        <sw-alert\n                            v-if="!isLoadingWebhooks && (!webhooks.length || webhooks.length === 0)"\n                            variant="warning"\n                            appearance="default"\n                            :showIcon="true"\n                            :closable="false">\n                            {{ $tc(\'unzer-payment-settings.webhook.empty\') }}\n                        </sw-alert>\n\n                        <div v-else>\n\n                            <sw-data-grid\n                                ref="webhookDataGrid"\n                                v-on:select-item="onSelectWebhook"\n                                :showActions="false"\n                                :showSelection="true"\n                                :dataSource="webhooks"\n                                :isLoading="isLoadingWebhooks"\n                                :columns="webhookColumns">\n                            </sw-data-grid>\n\n                            <sw-button-process\n                                @click="clearWebhooks"\n                                @process-finish="onClearingFinished()"\n                                :isLoading="isLoadingWebhooks || isClearing"\n                                :processSuccess="isClearingSuccessful"\n                                :disabled="isLoadingWebhooks || isClearing || webhookSelectionLength == 0"\n                                variant="danger">\n                                {{ $tc(\'unzer-payment-settings.modal.webhook.submit.clear\', webhookSelectionLength, {count: webhookSelectionLength}) }}\n                            </sw-button-process>\n                        </div>\n                    </sw-card>\n                </sw-card-view>\n            </template>\n        {% endblock %}\n    </sw-page>\n{% endblock %}\n',mixins:[E.getByName("notification"),E.getByName("sw-inline-snippet")],inject:["repositoryFactory","UnzerPaymentConfigurationService"],data:function(){return{isLoading:!0,isLoadingWebhooks:!0,isTesting:!1,isTestSuccessful:!1,isSaveSuccessful:!1,config:{},showWebhookModal:!1,webhooks:[],webhookSelection:null,webhookSelectionLength:0,isClearing:!1,isClearingSuccessful:!1,selectedSalesChannelId:null}},metaInfo:function(){return{title:"UnzerPayment"}},computed:{paymentMethodRepository:function(){return this.repositoryFactory.create("payment_method")},webhookColumns:function(){return[{property:"event",dataIndex:"event",label:"Event"},{property:"url",dataIndex:"url",label:"URL"}]},arrowIconName:function(){return L.app.config.version.match(/((\d+)\.?(\d+?)\.?(\d+)?\.?(\d*))-?([A-z]+?\d+)?/i)[3]>=5?"regular-chevron-right-xs":"small-arrow-medium-right"}},methods:{getConfigValue:function(e){if(!(this.config&&this.$refs.systemConfig&&this.$refs.systemConfig.actualConfigData&&this.$refs.systemConfig.actualConfigData.null))return"";var t=this.$refs.systemConfig.actualConfigData.null;return this.config["UnzerPayment6.settings.".concat(e)]||t["UnzerPayment6.settings.".concat(e)]},onValidateCredentials:function(){var e=this;this.isTestSuccessful=!1,this.isTesting=!0;var t={publicKey:this.getConfigValue("publicKey"),privateKey:this.getConfigValue("privateKey"),salesChannel:this.$refs.systemConfig.currentSalesChannelId};this.UnzerPaymentConfigurationService.validateCredentials(t).then((function(){e.createNotificationSuccess({title:e.$tc("unzer-payment-settings.form.message.success.title"),message:e.$tc("unzer-payment-settings.form.message.success.message")}),e.isTestSuccessful=!0,e.isTesting=!1})).catch((function(){e.createNotificationError({title:e.$tc("unzer-payment-settings.form.message.error.title"),message:e.$tc("unzer-payment-settings.form.message.error.message")}),e.isTesting=!1}))},onTestFinished:function(){this.isTestSuccessful=!1},onSave:function(){var e=this;this.isLoading=!0,this.$refs.systemConfig.saveAll().then((function(){var t=e.$tc("sw-plugin-config.messageSaveSuccess");"sw-plugin-config.messageSaveSuccess"===t&&(t=e.$tc("sw-extension-store.component.sw-extension-config.messageSaveSuccess")),e.createNotificationSuccess({title:e.$tc("global.default.success"),message:t}),e.$refs.applePayCertificates.onSave().then((function(){e.isLoading=!1}))})).catch((function(t){e.createNotificationError({title:e.$tc("global.default.error"),message:t}),e.isLoading=!1}))},onConfigChange:function(e){this.config=e,this.isLoading=!1,this.loadWebhooks(),this.$refs.applePayCertificates.loadData()},onLoadingChanged:function(e){this.isLoading=e},onSalesChannelChanged:function(e,t){e&&this.onConfigChange(e),this.selectedSalesChannelId=t},onWebhookRegistered:function(){this.loadWebhooks()},loadWebhooks:function(){var e=this;this.isLoadingWebhooks=!0,this.UnzerPaymentConfigurationService.getWebhooks(this.getConfigValue("privateKey")).then((function(t){console.log(t),e.webhooks=t})).finally((function(){e.isLoadingWebhooks=!1,e.isClearingSuccessful=!1}))},onSelectWebhook:function(e){this.webhookSelectionLength=Object.keys(e).length,this.webhookSelection=e},clearWebhooks:function(){var e=this,t=this;this.isClearingSuccessful=!1,this.isClearing=!0,this.isLoading=!0,this.UnzerPaymentConfigurationService.clearWebhooks({privateKey:this.getConfigValue("privateKey"),selection:this.webhookSelection}).then((function(n){t.isClearingSuccessful=!0,t.isLoadingWebhooks=!0,t.webhookSelection=[],t.webhookSelectionLength=0,t.$refs.webhookDataGrid.resetSelection(),e.loadWebhooks(),void 0!==n&&t.messageGeneration(n)})).catch((function(){e.createNotificationError({title:e.$tc("unzer-payment-settings.webhook.globalError.title"),message:e.$tc("unzer-payment-settings.webhook.globalError.message")})})).finally((function(){t.isLoading=!1,t.isClearing=!1}))},messageGeneration:function(e){var t=this,n=e.length;Object.keys(e).forEach((function(a){e[a].success?t.createNotificationSuccess({title:t.$tc(e[a].message,n),message:t.$tc("unzer-payment-settings.webhook.messagePrefix",n)+a}):t.createNotificationError({title:t.$tc(e[a].message,n),message:t.$tc("unzer-payment-settings.webhook.messagePrefix",n)+a})}))},onClearingFinished:function(){this.isClearingSuccessful=!1,this.isClearing=!1},getBind:function(e,t){var n;return t!==this.config&&(this.config=t),this.$refs.systemConfig.config.forEach((function(t){t.elements.forEach((function(t){t.name!==e.name||(n=t)}))})),n||e},openWebhookModal:function(){this.showWebhookModal=!0},closeWebhookModal:function(){this.showWebhookModal=!1}}});var A=Shopware.Module,U={type:"plugin",name:"UnzerPayment",title:"unzer-payment-settings.module.title",description:"unzer-payment-settings.module.description",version:"1.1.0",targetVersion:"1.1.0",snippets:{"de-DE":I,"en-GB":D},routes:{settings:{component:"unzer-payment-settings",path:"settings",meta:{parentPath:"sw.settings.index"}}}},O=Shopware.Context.app.config.version.match(/((\d+)\.?(\d+?)\.?(\d+)?\.?(\d*))-?([A-z]+?\d+)?/i);O&&6===parseInt(O[2])&&parseInt(O[3])>3&&(U.settingsItem=[{name:"unzer-payment-configuration",to:"unzer.payment.configuration.settings",label:"unzer-payment-settings.module.title",group:"plugins",iconComponent:"unzer-payment-plugin-icon",backgroundEnabled:!1}]),A.register("unzer-payment-configuration",U);n("7f1S"),n("iL9a"),n("TWqd"),n("RbH9")},dr7A:function(e,t,n){},iL9a:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(){"use strict";a=function(){return e};var e={},t=Object.prototype,i=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function d(e,t,n,a){var i=t&&t.prototype instanceof f?t:f,o=Object.create(i.prototype),s=new I(a||[]);return r(o,"_invoke",{value:z(e,n,s)}),o}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=d;var m={};function f(){}function h(){}function y(){}var g={};u(g,s,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(D([])));v&&v!==t&&i.call(v,s)&&(g=v);var w=y.prototype=f.prototype=Object.create(g);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function a(r,o,s,c){var l=p(e[r],e,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==n(d)&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,s,c)}),(function(e){a("throw",e,s,c)})):t.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return a("throw",e,s,c)}))}c(l.arg)}var o;r(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){a(e,n,t,i)}))}return o=o?o.then(i,i):i()}})}function z(e,t,n){var a="suspendedStart";return function(i,r){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===i)throw r;return R()}for(n.method=i,n.arg=r;;){var o=n.delegate;if(o){var s=_(o,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var c=p(e,t,n);if("normal"===c.type){if(a=n.done?"completed":"suspendedYield",c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(a="completed",n.method="throw",n.arg=c.arg)}}}function _(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=p(a,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,m;var r=i.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function D(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:R}}function R(){return{value:void 0,done:!0}}return h.prototype=y,r(w,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:h,configurable:!0}),h.displayName=u(y,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},k(C.prototype),u(C.prototype,c,(function(){return this})),e.AsyncIterator=C,e.async=function(t,n,a,i,r){void 0===r&&(r=Promise);var o=new C(d(t,n,a,i),r);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(w),u(w,l,"Generator"),u(w,s,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=D,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,a){return o.type="throw",o.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a],o=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var s=i.call(r,"catchLoc"),c=i.call(r,"finallyLoc");if(s&&c){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&i.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var r=a;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:D(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),m}},e}function i(e,t,n,a,i,r,o){try{var s=e[r](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,i)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,o=void 0,o=function(e,t){if("object"!==n(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===n(o)?o:String(o)),i)}var r,o}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=Shopware.Application,p=Shopware.Classes.ApiService,m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(f,e);var t,n,l,u,d,m=c(f);function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unzer-payment";return r(this,f),m.call(this,e,t,n)}return t=f,(n=[{key:"checkCertificates",value:function(e){var t="_action/".concat(this.getApiBasePath(),"/apple-pay/certificates");return e&&(t+="/".concat(e)),this.httpClient.get(t,{headers:this.getBasicHeaders()}).then((function(e){return p.handleResponse(e)}))}},{key:"updateCertificates",value:(u=a().mark((function e(t,n,i,r){var o,s,c,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o="_action/".concat(this.getApiBasePath(),"/apple-pay/certificates"),t&&(o+="/".concat(t)),s={},e.t0=a().keys(n);case 4:if((e.t1=e.t0()).done){e.next=13;break}if(c=e.t1.value,!n[c]){e.next=11;break}return l=n[c],e.next=10,l.text();case 10:s[c]=e.sent;case 11:e.next=4;break;case 13:if(i&&(s.inheritMerchantIdentification=!0),r&&(s.inheritPaymentProcessing=!0),0!==s.length){e.next=17;break}return e.abrupt("return",new Promise);case 17:return e.abrupt("return",this.httpClient.post(o,s,{headers:this.getBasicHeaders()}).then((function(e){return p.handleResponse(e)})));case 18:case"end":return e.stop()}}),e,this)})),d=function(){var e=this,t=arguments;return new Promise((function(n,a){var r=u.apply(e,t);function o(e){i(r,n,a,o,s,"next",e)}function s(e){i(r,n,a,o,s,"throw",e)}o(void 0)}))},function(e,t,n,a){return d.apply(this,arguments)})}])&&o(t.prototype,n),l&&o(t,l),Object.defineProperty(t,"prototype",{writable:!1}),f}(p);d.addServiceProvider("UnzerPaymentApplePayService",(function(e){var t=d.getContainer("init");return new m(t.httpClient,e.loginService)}))},xq9F:function(e,t,n){},ydqr:function(e,t,n){"use strict";function a(e,t){for(var n=[],a={},i=0;i<t.length;i++){var r=t[i],o=r[0],s={id:e+":"+i,css:r[1],media:r[2],sourceMap:r[3]};a[o]?a[o].parts.push(s):n.push(a[o]={id:o,parts:[s]})}return n}n.r(t),n.d(t,"default",(function(){return f}));var i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var r={},o=i&&(document.head||document.getElementsByTagName("head")[0]),s=null,c=0,l=!1,u=function(){},d=null,p="data-vue-ssr-id",m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(e,t,n,i){l=n,d=i||{};var o=a(e,t);return h(o),function(t){for(var n=[],i=0;i<o.length;i++){var s=o[i];(c=r[s.id]).refs--,n.push(c)}t?h(o=a(e,t)):o=[];for(i=0;i<n.length;i++){var c;if(0===(c=n[i]).refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete r[c.id]}}}}function h(e){for(var t=0;t<e.length;t++){var n=e[t],a=r[n.id];if(a){a.refs++;for(var i=0;i<a.parts.length;i++)a.parts[i](n.parts[i]);for(;i<n.parts.length;i++)a.parts.push(g(n.parts[i]));a.parts.length>n.parts.length&&(a.parts.length=n.parts.length)}else{var o=[];for(i=0;i<n.parts.length;i++)o.push(g(n.parts[i]));r[n.id]={id:n.id,refs:1,parts:o}}}}function y(){var e=document.createElement("style");return e.type="text/css",o.appendChild(e),e}function g(e){var t,n,a=document.querySelector("style["+p+'~="'+e.id+'"]');if(a){if(l)return u;a.parentNode.removeChild(a)}if(m){var i=c++;a=s||(s=y()),t=w.bind(null,a,i,!1),n=w.bind(null,a,i,!0)}else a=y(),t=k.bind(null,a),n=function(){a.parentNode.removeChild(a)};return t(e),function(a){if(a){if(a.css===e.css&&a.media===e.media&&a.sourceMap===e.sourceMap)return;t(e=a)}else n()}}var b,v=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")});function w(e,t,n,a){var i=n?"":a.css;if(e.styleSheet)e.styleSheet.cssText=v(t,i);else{var r=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(r,o[t]):e.appendChild(r)}}function k(e,t){var n=t.css,a=t.media,i=t.sourceMap;if(a&&e.setAttribute("media",a),d.ssrId&&e.setAttribute(p,t.id),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}}});
//# sourceMappingURL=unzer-payment6.js.map